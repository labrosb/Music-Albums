(this["webpackJsonpmusic-albums"]=this["webpackJsonpmusic-albums"]||[]).push([[0],{42:function(e,t,a){e.exports=a.p+"static/media/loading.4e722e12.svg"},44:function(e,t,a){e.exports=a(89)},49:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setError",(function(){return M})),a.d(n,"resetError",(function(){return w}));var r={};a.r(r),a.d(r,"getAlbumById",(function(){return C})),a.d(r,"setTopAlbums",(function(){return S})),a.d(r,"getTopAlbums",(function(){return I}));var c={};a.r(c),a.d(c,"addFavorite",(function(){return V})),a.d(c,"removeFavorite",(function(){return x})),a.d(c,"setFavoriteRankings",(function(){return D})),a.d(c,"toggleFavorite",(function(){return _}));var l=a(0),i=a.n(l),o=a(15),s=a.n(o),u=(a(49),a(16)),m=a(11),v=a(20),b=a(6),d=a(26),f=a(38),E=a.n(f),p=a(39);var g=a(12);var h=a(19);var O={topAlbums:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAVORITES":return t.list;default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITE":return e.concat([t.album]);case"REMOVE_FAVORITE":return e.filter((function(e){return e.id!==t.id}));case"UPDATE_FAVORITE_RANKS":return Object(g.a)({},t.favorites);default:return e}},favoritesMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITE":return e.concat([t.album.id]);case"REMOVE_FAVORITE":return e.filter((function(e){return e!==t.id}));default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return Object(g.a)({},e,Object(h.a)({},t.errorType,t.error));default:return e}}},N={key:"root",whitelist:["favorites","favoritesMap"],storage:E.a},k=Object(d.a)(N,O),j={topAlbums:[],favorites:[],favoritesMap:[],error:{albums:null}},F=function(e,t){return k(e,t)},A=[p.a];var y=function(){var e=Object(b.d)(b.a.apply(void 0,A));return Object(b.e)(F,j,e)}(),R=(Object(d.b)(y),a(13)),T=a(40),B=a.n(T).a.create({baseURL:"https://itunes.apple.com/us/rss",headers:{Accept:"application/json","Content-Type":"application/json"}});function M(e,t){return{type:"SET_ERROR",error:t,errorType:e}}function w(e){return function(t,a){a().error[e]&&t(M(e,null))}}function C(e){return function(t,a){return a().topAlbums.find((function(t){return t.id.attributes["im:id"]===e}))}}function S(e){return{type:"SET_FAVORITES",list:e.map((function(e,t){return{id:e.id.attributes["im:id"],thumbnail:(a=e["im:image"][0].label,a.replace("55x55bb","500x500bb")),thumbSmall:e["im:image"][0].label,name:e["im:name"].label,artist:e["im:artist"].label,price:e["im:price"].label,category:e.category.attributes.label,releaseDate:e["im:releaseDate"].attributes.label,link:e.link.attributes.href,rights:e.rights.label,rank:t+1};var a}))}}function I(e){return function(t){return t(w("albums")),B.get("/topalbums/limit=".concat(e,"/json")).then((function(e){200===e.status&&e.data.feed?t(S(e.data.feed.entry)):t(M("albums","Failed to retrieve albums."))})).catch((function(){t(M("albums","Failed to retrieve albums."))}))}}function V(e){return{type:"ADD_FAVORITE",album:e}}function x(e){return{type:"REMOVE_FAVORITE",id:e}}function D(){return function(e,t){var a=t().topAlbums,n=a.topAlbums,r=a.favorites;n&&r.forEach((function(e){var t=n.findIndex((function(t){return e.id===t.id}));r.rank=t>-1?t+1:null}))}}function _(e,t){return function(a){a(e?x(t.id):V(t))}}var L=Object(g.a)({},r,{},c,{},n);var U=function(e){return Object(v.b)((function(e){return e}),(function(e){return Object(b.b)(L,e)}))(e)},J=a(9),P=a(10),W=(a(74),"/Music-albums");var K=function(e){var t=e.title,a=e.active,n=e.noBackButton,r=Object(m.g)(),c=Object(l.useCallback)((function(){r.push({pathname:"".concat(W,"/top-100")})}),[r]),o=Object(l.useCallback)((function(){r.push({pathname:"".concat(W,"/my-favorites")})}),[r]),s=Object(l.useCallback)((function(){r.goBack()}),[r]);return i.a.createElement("div",{className:"header"},n?null:i.a.createElement("div",{className:"back-button",onClick:s},i.a.createElement(J.a,{className:"icon",icon:P.a})),i.a.createElement("div",{className:"title"},i.a.createElement("h1",{className:"title-label"},t||"Music"),i.a.createElement(J.a,{className:"icon",icon:P.c})),i.a.createElement("div",{className:"menu"},i.a.createElement("span",{className:"route ".concat("top100"===a?"active":""),onClick:c},"Top 100"),i.a.createElement("span",{className:"route ".concat("favorites"===a?"active":""),onClick:o},"My Favorites")))},X=a(42),$=a.n(X);a(76);var q=function(e){var t=e.header,a=e.active,n=e.noBackButton;return i.a.createElement(i.a.Fragment,null,i.a.createElement(K,Object.assign({title:t},{active:a,noBackButton:n})),i.a.createElement("div",{className:"alt-content"},i.a.createElement("img",{className:"spinner-icon",src:$.a,alt:"Loading..."})))};a(77);var z=function(e){var t=e.header,a=e.message,n=e.active,r=e.noBackButton;return i.a.createElement(i.a.Fragment,null,i.a.createElement(K,Object.assign({title:t},{active:n,noBackButton:r})),i.a.createElement("div",{className:"error-content"},i.a.createElement("h2",{className:"error-title"},"Error!"),i.a.createElement("p",{className:"error-text"},a||"An error occured!")))},G=a(43),H=a.n(G);a(82);var Q=function(e){var t=e.toggleFavorite,a=e.isFavorite,n=e.album,r=Object(m.g)(),c=Object(l.useCallback)((function(){r.push({pathname:"".concat("/Music-albums","/album-page/").concat(n.id),state:n})}),[n,r]),o=Object(l.useCallback)((function(e){e.stopPropagation(),t(a,n)}),[a,n,t]);return i.a.createElement("div",{className:"card-container",onClick:c},i.a.createElement(H.a,{height:200},i.a.createElement("img",{className:"card-image",src:n.thumbnail,alt:n.thumbSmall})),i.a.createElement("div",{className:"card-favorite ".concat(a?"active":""),onClick:o},i.a.createElement(J.a,{className:"favorite-icon",icon:P.b})),i.a.createElement("div",{className:"inline-elements"},i.a.createElement("span",{className:"card-rank"},n.rank||"X"),i.a.createElement("div",{className:"card-details"},i.a.createElement("p",{className:"card-detail primary"},n.name),i.a.createElement("p",{className:"card-detail secondary"},n.artist))))};a(83);var Y=i.a.memo((function(e){var t=e.albums,a=e.isFavoritesList,n=e.toggleFavorite,r=e.favoritesMap;return i.a.createElement("div",{className:"list"},t&&t.length>0?t.map((function(e){return i.a.createElement("div",{key:"albumList-".concat(e.id)},i.a.createElement(Q,Object.assign({isFavorite:a||r.includes(e.id)},{album:e,toggleFavorite:n})))})):i.a.createElement("div",{className:"altMessage"},i.a.createElement("p",null,"No Albums Found...")))}));a(84);var Z=i.a.memo((function(e){var t=e.data,a=e.placeholder,n=e.onFiltered;return i.a.createElement("div",{className:"filter-container"},i.a.createElement("input",{type:"text",className:"filter-input",placeholder:a||"Search",onChange:function(e){var a=e.target,r=new RegExp(a.value.toUpperCase()),c=t.filter((function(e){return r.test(e.name.toUpperCase())}));n(c)}}),i.a.createElement(J.a,{className:"search-icon",icon:P.d}))}));var ee=U((function(e){var t=e.error,a=e.getTopAlbums,n=e.favoritesMap,r=e.toggleFavorite,c=e.topAlbums,o=Object(l.useState)(!1),s=Object(R.a)(o,2),u=s[0],m=s[1],v=Object(l.useState)(),b=Object(R.a)(v,2),d=b[0],f=b[1];return Object(l.useEffect)((function(){a(100).then((function(){return m(!0)}))}),[a,m]),t.albums?i.a.createElement(z,{noBackButton:!0,active:"top100",message:t.albums}):u?i.a.createElement(i.a.Fragment,null,i.a.createElement(K,{noBackButton:!0,active:"top100"}),i.a.createElement("div",{className:"content"},i.a.createElement(Z,{placeholder:"Search Titles...",onFiltered:f,data:c}),i.a.createElement(Y,Object.assign({albums:d||c},{toggleFavorite:r,favoritesMap:n})))):i.a.createElement(q,{noBackButton:!0,active:"top100"})}));a(85);var te=function(e){var t=e.thumbnail,a=e.rank;return i.a.createElement("div",{className:"image-container"},i.a.createElement("img",{className:"album-image",src:t,alt:"Thumbnail"}),a?i.a.createElement("div",{className:"album-ranking"},a):null)};a(86);var ae=function(e){var t=e.albumData,a=e.toggleFavorite,n=e.isFavorite,r=Object(l.useCallback)((function(){window.location.href=t.link}),[t.link]),c=Object(l.useCallback)((function(){a(n,t)}),[t,n,a]);return i.a.createElement("div",{className:"album-details"},i.a.createElement("div",{className:"details-row"},i.a.createElement("div",{className:"light-cover",style:{backgroundImage:"url(".concat(t.thumbnail,")")}}),i.a.createElement("div",{className:"details-column"},i.a.createElement("div",{className:"album-artist"},t.artist),i.a.createElement("div",{className:"album-name"},t.name),i.a.createElement("br",null),i.a.createElement("div",{className:"album-detail"},"Music: ",t.category),i.a.createElement("div",{className:"album-detail"},"Int.Release ",t.releaseDate)),i.a.createElement("div",{className:"album-price"},t.price)),i.a.createElement("div",{className:"album-buttons"},i.a.createElement("div",{className:"album-button favorite-button",onClick:c},i.a.createElement(J.a,{className:"button-icon",icon:P.b}),i.a.createElement("span",null,n?"Remove":"Add")),i.a.createElement("div",{className:"album-button",onClick:r},"View More")))};a(87);var ne=Object(m.h)(U(i.a.memo((function(e){var t=e.error,a=e.location,n=e.match,r=e.getTopAlbums,c=e.topAlbums,o=e.getAlbumById,s=e.favoritesMap,u=e.toggleFavorite,m=Object(l.useState)((function(){return!!c.length})),v=Object(R.a)(m,2),b=v[0],d=v[1],f=Object(l.useState)((function(){return a.state||{}})),E=Object(R.a)(f,2),p=E[0],g=E[1],h=Object(l.useMemo)((function(){return s.includes(p.id)}),[p,s]);return Object(l.useEffect)((function(){if(a.state)d(!0);else{var e=n.params.id;if(c.length){var t=o(e);g(t)}else r(100).then((function(){var t=o(e);g(t),d(!0)}))}}),[c,r,o,d,a.state,n.params]),t.albums?i.a.createElement(z,Object.assign({message:t.albums},{header:"Album"})):b||a.state?i.a.createElement(i.a.Fragment,null,i.a.createElement(K,{title:"Album"}),i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"content-row"},i.a.createElement(te,{thumbnail:p.thumbnail,rank:p.rank}),i.a.createElement(ae,{albumData:p,isFavorite:h,toggleFavorite:u})),i.a.createElement("p",{className:"rights-text"},p.rights))):i.a.createElement(q,{header:"Album"})}))));var re=U((function(e){var t=e.favorites,a=e.toggleFavorite,n=e.setFavoriteRankings;return Object(l.useEffect)((function(){n()}),[n]),i.a.createElement(i.a.Fragment,null,i.a.createElement(K,{active:"favorites"}),i.a.createElement("div",{className:"content"},i.a.createElement(Y,Object.assign({isFavoritesList:!0,albums:t},{toggleFavorite:a}))))})),ce=(a(88),"/Music-albums");var le=function(){return i.a.createElement(v.a,{store:y},i.a.createElement(u.a,null,i.a.createElement(m.d,null,i.a.createElement(m.b,{exact:!0,path:"".concat(ce,"/top-100")},i.a.createElement(ee,null)),i.a.createElement(m.b,{exact:!0,path:"".concat(ce,"/album-page/:id")},i.a.createElement(ne,null)),i.a.createElement(m.b,{exact:!0,path:"".concat(ce,"/my-favorites")},i.a.createElement(re,null)),i.a.createElement(m.a,{to:"".concat(ce,"/top-100")}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.8d3aa482.chunk.js.map